[gd_scene load_steps=14 format=3 uid="uid://d2h1aw2vkvc2h"]

[ext_resource type="Script" uid="uid://dr3n7vmxusowm" path="res://scripts/enemy_spawner.gd" id="1_k0juu"]
[ext_resource type="PackedScene" uid="uid://ds70l2yfgfsm1" path="res://scenes/player.tscn" id="1_nnsk1"]
[ext_resource type="PackedScene" uid="uid://x4xe7woyxt03" path="res://scenes/enemy.tscn" id="2_71j4m"]
[ext_resource type="PackedScene" uid="uid://dhthch7vc287b" path="res://scenes/ramp.tscn" id="2_rwgxs"]
[ext_resource type="Script" uid="uid://c7w83yyq8cqcw" path="res://scripts/camera_spring_arm.gd" id="3_4wyf3"]
[ext_resource type="Texture2D" uid="uid://bdrkro8vcol37" path="res://assets/nycsprite.png" id="6_nyc"]

[sub_resource type="NavigationMesh" id="NavigationMesh_4wyf3"]
vertices = PackedVector3Array(-1.053, 1, -46, 1.197, 1, -46, 1.447, 1, -47, -1.303, 1, -47, 7.197, 1, -59.5, -7.053, 1, -59.5, 7.197, 1, -47, -7.053, 1, -47, -1.303, 1, -45, -7.053, 1, 59.5, 7.197, 1, 59.5, 1.447, 1, -45, 7.197, 1, -45, -7.053, 1, -45)
polygons = [PackedInt32Array(0, 3, 1), PackedInt32Array(1, 3, 2), PackedInt32Array(3, 5, 2), PackedInt32Array(2, 5, 4), PackedInt32Array(4, 6, 2), PackedInt32Array(3, 7, 5), PackedInt32Array(1, 11, 0), PackedInt32Array(0, 11, 8), PackedInt32Array(8, 11, 10), PackedInt32Array(8, 10, 9), PackedInt32Array(11, 12, 10), PackedInt32Array(9, 13, 8)]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_e5uuo"]
albedo_texture = ExtResource("6_nyc")

[sub_resource type="BoxMesh" id="BoxMesh_e5uuo"]
material = SubResource("StandardMaterial3D_e5uuo")
size = Vector3(1, 0.5, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_nnsk1"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_qfnet"]
ground_bottom_color = Color(0.59886074, 0.51500416, 0.43913347, 1)
ground_horizon_color = Color(0.57367647, 0.5654994, 0.5207991, 1)
sun_angle_max = 174.57

[sub_resource type="Sky" id="Sky_i7141"]
sky_material = SubResource("ProceduralSkyMaterial_qfnet")

[sub_resource type="Environment" id="Environment_4mrxx"]
background_mode = 2
sky = SubResource("Sky_i7141")
ambient_light_source = 3
ambient_light_color = Color(0.5138169, 0.85692924, 0.9289564, 1)
reflected_light_source = 2
tonemap_mode = 1
fog_light_color = Color(0.8242993, 0.8421593, 0.86995155, 1)

[node name="World" type="Node3D"]

[node name="EnemySpawner" type="Node3D" parent="." node_paths=PackedStringArray("root_node")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.3, 1, 52.475174)
script = ExtResource("1_k0juu")
enemy_prefab = ExtResource("2_71j4m")
root_node = NodePath("..")
max_enemies = 5
spawn_rate = 1

[node name="Map" type="Node3D" parent="."]

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="Map"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.2506386, 0.24716187, 0.5296092)
navigation_mesh = SubResource("NavigationMesh_4wyf3")

[node name="Floor" type="MeshInstance3D" parent="Map/NavigationRegion3D"]
transform = Transform3D(15, 0, 0, 0, 1, 0, 0, 0, 120, 0, 0, 0)
mesh = SubResource("BoxMesh_e5uuo")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="Map/NavigationRegion3D/Floor"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Map/NavigationRegion3D/Floor/StaticBody3D"]
shape = SubResource("BoxShape3D_nnsk1")

[node name="Ramps" type="Node3D" parent="Map/NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -21.034958)

[node name="Ramp1" parent="Map/NavigationRegion3D/Ramps" instance=ExtResource("2_rwgxs")]
transform = Transform3D(-1.311342e-07, 0, 3.000001, 0, 2, 0, -3.000001, 0, -1.311342e-07, 6.214, 1.25, -25)

[node name="Ramp4" parent="Map/NavigationRegion3D/Ramps" instance=ExtResource("2_rwgxs")]
transform = Transform3D(-1.3113416e-07, 0, 2.9999998, 0, 2, 0, -2.9999998, 0, -1.3113416e-07, 3.334, 1.25, -25)

[node name="Ramp2" parent="Map/NavigationRegion3D/Ramps" instance=ExtResource("2_rwgxs")]
transform = Transform3D(-1.3113416e-07, 0, 2.9999998, 0, 2, 0, -2.9999998, 0, -1.3113416e-07, -6.053, 1.25, -25)

[node name="Ramp3" parent="Map/NavigationRegion3D/Ramps" instance=ExtResource("2_rwgxs")]
transform = Transform3D(-1.3113416e-07, 0, 2.9999998, 0, 2, 0, -2.9999998, 0, -1.3113416e-07, -3.106, 1.25, -25)

[node name="Player" parent="." node_paths=PackedStringArray("camera", "world_root_node") instance=ExtResource("1_nnsk1")]
transform = Transform3D(-1, 0, -1.509958e-07, 0, 1, 0, 1.509958e-07, 0, -1, 0, 0.872195, -50.702637)
camera = NodePath("../CameraSpringArm/Camera3D")
world_root_node = NodePath("..")

[node name="CameraSpringArm" type="SpringArm3D" parent="." node_paths=PackedStringArray("player")]
transform = Transform3D(1, 0, 0, 0, 0.81915194, -0.5735764, 0, 0.5735764, 0.81915194, 0, 15, -2)
spring_length = -15.0
script = ExtResource("3_4wyf3")
player = NodePath("../Player")

[node name="Camera3D" type="Camera3D" parent="CameraSpringArm" groups=["Camera"]]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0, 0, 0)

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.9966759, -0.079709485, 0.01684694, -0.055693116, -0.5156771, 0.8549713, -0.059461713, -0.8530674, -0.51840216, -1.127, 100.006, -24.663)

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_4mrxx")
